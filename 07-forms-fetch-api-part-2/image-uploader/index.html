<!doctype html>
<meta charset="utf-8">

<input id="fileInput" type="file">

<script type="module">
  import ImageUploader from './index.js';

  const fileInput = document.getElementById('fileInput');

  fileInput.addEventListener('change', async () => {
    const uploader = new ImageUploader();

    try {
      const [file] = fileInput.files;
      const result = await uploader.upload(file);

      alert('Изображение загружено');
      console.log(result);
    } catch(error) {
      alert('Ошибка загрузки изображения');
      console.error(error);
    } finally {
      alert('Готово!')
    }
  });
</script>
